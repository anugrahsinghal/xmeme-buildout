<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Show Memes</title>
    <link rel="stylesheet" href="src/style-common.css" />
    <link rel="stylesheet" href="src/form-feature.css" />
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
  </head>
  <body>
    <header class="header">
      <h2>X Meme</h2>
    </header>

    <div class="form-container-with-preview hidden">
      <div class="wrapper">
        <div class="meme-view-container">
          <img
            src="https://placehold.it/300x300"
            alt="Image could not be loaded"
          />
          <ul>
            <li class="hidden">
              <i class="fa fa-user"></i
              ><span id="form-meme-author-name">Anugrah</span>
            </li>
            <br />
            <li class="hidden">
              <i class="fa fa-pencil"></i
              ><span id="form-meme-caption">Caption</span>
            </li>
          </ul>
        </div>
        <div class="create-update-form">
          <h3 class="edit-create">create meme</h3>
          <form class="create-update-form-obj">
            <p class="hidden">
              <label for="Name">name</label>
              <input type="text" name="Name" />
            </p>
            <p>
              <label for="Caption">caption</label>
              <input type="text" name="Caption" />
            </p>
            <p class="full">
              <label for="URL">url</label>
              <input type="text" name="URL" />
            </p>
            <p class="half" id="submit-data">
              <button>Submit</button>
            </p>
            <p class="half" id="cancel-form">
              <button>Cancel</button>
            </p>
          </form>
        </div>
      </div>
    </div>

    <div class="parent-meme-view-container">
      <div class="meme-post-wrapper">
        <!-- Dynamically populated content here -->
        <div class="meme-view-container">
          <img
            src="https://placehold.it/300x300"
            alt="Image could not be loaded"
          />
          <ul>
            <li class="meme-author">
              <i class="fa fa-user"></i
              ><span id="meme-author-name">Anugrah</span>
            </li>
            <li class="meme-caption">
              <i class="fa fa-pencil"></i>
              <span>
                Lorem ipsum dolor sit amet consectetur adipisicing elit.
                Similique dolores eos explicabo maiores expedita culpa sit in
                aperiam repellendus molestiae quidem, quisquam nobis veniam odit
                consequatur sapiente iste id quibusdam aut odio assumenda
                delectus architecto!
              </span>
            </li>
          </ul>
          <p class="edit-meme-btn">
            <button>Edit</button>
          </p>
        </div>
        <div class="meme-view-container">
          <img
            src="https://placehold.it/400x400"
            alt="Image could not be loaded"
          />
          <ul>
            <li class="meme-author">
              <i class="fa fa-user"></i
              ><span id="meme-author-name">Anugrah</span>
            </li>
            <li class="meme-caption">
              <i class="fa fa-pencil"></i>
              <span>
                Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                Architecto in quam fugiat, consectetur natus excepturi debitis.
                Consectetur totam saepe mollitia!
              </span>
            </li>
          </ul>
          <p class="edit-meme-btn">
            <button>Edit</button>
          </p>
        </div>
        <div class="meme-view-container">
          <img
            src="https://placehold.it/400x500"
            alt="Image could not be loaded"
          />
          <ul>
            <li class="meme-author">
              <i class="fa fa-user"></i>
              <span id="meme-author-name">Tikesh</span>
            </li>
            <li class="meme-caption">
              <i class="fa fa-pencil"></i>
              <span> Lorem ipsum dolor sit amet. </span>
            </li>
            <!-- <li class="edit-meme-btn">
              <button class="edit-meme-btn">Edit</button>
            </li> -->
          </ul>
          <p class="edit-meme-btn">
            <button>Edit</button>
          </p>
        </div>
      </div>
    </div>

    <p
      id="create-meme-iframe"
      style="
        position: fixed;
        margin: 0;
        padding: 0;
        bottom: 9px;
        right: 0px;
        border: none;
        width: 50px;
        height: 36px;
        z-index: 9999999999999;
      "
      src="create-btn.html"
    >
      <a
        style="
          display: inline-flex;
          align-items: center;
          height: 32px;
          padding: 0 12px;
          font-size: 13px;
          font-weight: 500;
          color: white;
          background-color: rgb(21, 21, 21);
          cursor: pointer;
          border: 1px solid rgb(52, 52, 52);
          border-radius: 4px;
          text-decoration: none;
          font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI,
            Roboto, Ubuntu, Droid Sans, Helvetica Neue, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: antialiased;
          z-index: 99999999999;
        "
        id="create-meme-iframe-link"
        onclick="showCreateForm(event)"
        ><i class="fa fa-pencil"></i
      ></a>
    </p>

    <script>
      let log = console.log;
      let editForm = document.querySelector(".create-update-form-obj");
      editForm.addEventListener("click", (e) => e.preventDefault());

      let editCreatePreview = document.querySelector(
        ".form-container-with-preview"
      );
      let editMemeBtns = document.querySelectorAll(".edit-meme-btn");
      editMemeBtns.forEach((item) => {
        item.addEventListener("click", showEditForm);
      });
      function showEditForm(event) {
        console.log(event);
        editCreatePreview.style.display = "unset";
        scroll(0, 0);
      }
      let cancelBtn = document.querySelector("#cancel-form");
      cancelBtn.addEventListener("click", () => {
        editCreatePreview.style.display = "none";
        document.querySelector("#create-meme-iframe").style.display = "unset";
      });
      let submitBtn = document.querySelector("#submit-data");
      submitBtn.addEventListener("click", sendDataAndReload);
      function sendDataAndReload(event) {
        // validate and send data to backend
        setTimeout(() => {
          editCreatePreview.style.display = "none";
          location.reload();
        }, 300);
      }
    </script>
    <script>
      // load memes
    </script>
    <script>
      // add new meme
      let creationIframe = document.querySelector("#create-meme-iframe");
      creationIframe.addEventListener("click", showCreateForm);
      let creationIframeLink = document.querySelector(
        "#create-meme-iframe-link"
      );
      // log(creationIframeLink)
      creationIframeLink.addEventListener("click", showCreateForm);
      function showCreateForm(event) {
        document.querySelectorAll(".hidden").forEach((item) => {
          log(item);
          item.style.display = "unset";
        });
        showEditForm();
        document.querySelector("#create-meme-iframe").style.display = "none";
      }
    </script>
  </body>
</html>
